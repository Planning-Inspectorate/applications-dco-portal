import { app } from '@azure/functions';
import { initialiseService } from '../init.ts';
import { buildMalwareDetectionHandler } from './document-processing/malware-detection/impl.ts';

const service = initialiseService();
const { logger } = service;

logger.info('registering malware-detection function to consume on the associated service bus topic');

app.eventGrid('malware-detection', {
	handler: buildMalwareDetectionHandler(service)
});
